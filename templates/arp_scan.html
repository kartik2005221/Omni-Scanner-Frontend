{% extends 'base.html' %}

{% block title %}1 â†’ 1. ARP Scan{% endblock %}

{% block body %}
<h1 class="text-4xl font-bold text-green-400 text-center py-10">
    ARP Scan Results
</h1>

<!-- Loading Spinner -->
<div id="loading" class="text-center hidden">
    <button
        class="inline-block rounded-full bg-green-500 text-white shadow-md hover:bg-green-600 focus:bg-green-700 active:bg-green-800 transition duration-150 px-6 py-2 text-sm font-semibold uppercase"
        type="button"
    >
        <div
            role="status"
            class="inline-block h-4 w-4 mr-2 animate-spin rounded-full border-2 border-current border-r-transparent align-middle"
        >
            <span class="sr-only">Loading...</span>
        </div>
        Running Scan
    </button>
</div>

<!-- Output Box -->
<div class="flex justify-center items-center mt-10 px-4">
    <aside class="bg-gray-950 text-white p-6 rounded-xl w-full max-w-3xl font-mono shadow-lg">
        <!-- Command Header -->
        <div class="flex justify-between items-center mb-4">
            <div class="flex items-center gap-1 text-green-400">
                <span>$</span>
                <span id="arp-scan-command">sudo arp-scan -l</span>
            </div>
            <button 
                data-copy="arp-scan-command"
                class="text-xs px-3 py-1 border border-white text-white rounded-md hover:bg-gray-700 transition-all hover:scale-105 active:scale-95"
            >
                Copy
            </button>
        </div>

        <!-- Results Output -->
        <div id="results" class="text-white whitespace-pre-wrap overflow-auto max-h-96 min-h-[10rem]">
            <!-- Scan results will appear here dynamically -->
        </div>
    </aside>
</div>




{% endblock %}

<!-- {% block scripts %}
        document.addEventListener("DOMContentLoaded", function () {
            const loading = document.getElementById("loading");
            const results = document.getElementById("results");

            // Show loading animation
            loading.style.display = "block";

            // Fetch ARP scan results
            fetch("/api/arp_scan")
                .then((response) => response.json())
                .then((data) => {
                    // Hide loading animation
                    loading.style.display = "none";

                    // Display results
                    if (data.success) {
                        results.innerHTML = `<pre>${data.results}</pre>`;
                    } else {
                        results.innerHTML = `<p>Error: ${data.error}</p>`;
                    }
                })
                .catch((error) => {
                    loading.style.display = "none";
                    results.innerHTML = `<p>Error: ${error.message}</p>`;
                });
        });
{% endblock %} -->

{% block script_tag %}<script src="{{ url_for('static', filename='js/copy.js') }}"></script>{% endblock %}
